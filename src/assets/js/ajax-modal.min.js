/*!
 * @copyright Copyright &copy; Anton Kazarinov 2018
 *
 * Author: Anton Kazarinov
 */
$(function(){$(document).on("click",'a[data-toggle="ajax-modal"]',function(t){t.preventDefault();var a=$(this),e=$(a.attr("data-target")),d=a.attr("href"),o=a.attr("data-title")||"",n=e.find(".modal-header").find(".modal-title"),i=e.modal("show").find(".modal-body").empty(),l=a.attr("data-gridview")||!1;0===n.length?$("<h5>"+o+"</h5>").addClass("modal-title").prependTo(e.find(".modal-header")):n.text(o);var s={url:d,beforeSend:function(){i.addClass("loading"),i.html('<div class="spinner-grow mt-5 mb-5"></div>')},success:function(t){i.html(t),e.trigger("loaded.bs.modal",[t])},complete:function(){i.removeClass("loading")}};!1!==l&&(s.data={ids:$(l).yiiGridView("getSelectedRows")}),d&&$.ajax(s)}),$(document).on("submit","form[data-ajax]",function(t){t.preventDefault();var a=new FormData(this),e=$(this),d=e.closest(".modal-body"),o=e.closest(".modal").attr("id");$.ajax({url:e.attr("action"),type:"POST",processData:!1,contentType:!1,data:a,beforeSend:function(){d.addClass("loading"),d.html('<div class="spinner-grow mt-5 mb-5"></div>')},success:function(t){$("#"+o).trigger("submit.success.bs.modal",[t]),d.html(t)},complete:function(){d.removeClass("loading")}})})});
